# OOP Design Patterns
## Overview
A curated list of common OOP design patterns.

*This README.md is generated by running `yarn start`.*

## Categories
### Behavioral
Behavioral patterns are algorithms and the assignment of responsibilities between objects.
### Creational
Creational patterns provide various object creation mechanisms, which increase flexibility and reuse of existing code.
### Structural
Structural patterns explain how to assemble objects and classes into larger structures, while keeping this structures flexible and efficient.

## Table of Contents
- Behavioral

	- [Chain Of Responsibility](#behavioral---chain-of-responsibility)

	- [Command](#behavioral---command)

- Creational

	- [Builder](#creational---builder)

	- Factory

		- [Abstract Factory](#creational---factory---abstract-factory)

		- [Factory Method](#creational---factory---factory-method)

		- [Simple Factory](#creational---factory---simple-factory)

	- [Prototype](#creational---prototype)

	- [Singleton](#creational---singleton)

- Structural

	- [Adapter](#structural---adapter)

	- [Bridge](#structural---bridge)

	- [Composite](#structural---composite)

	- [Decorator](#structural---decorator)

	- [Facade](#structural---facade)

	- [Flyweight](#structural---flyweight)

	- [Proxy](#structural---proxy)


## Patterns
### Behavioral - Chain Of Responsibility
[back to top](#table-of-contents)

![Behavioral - Chain Of Responsibility](https://www.plantuml.com/plantuml/svg/XL2x2i9G3Dtp5H6N5g7kdTGkJWh-GRIflNWVqfk28lwxkTO77SHCoNabP165EkcTnQebuxVDZkCv-6ZsnXgvWXYn_8DhcMhka8fJGGLMOOVpGOcXqT4vyZLCf6N7ICuS2O3sKJew21uinOXhLLYDk07Yz3DvleW2Cumi6-sp1EHFvFOEk6FN-oo7Eu0FmcYvaRJsbL6MIgl3D3YfW-TI-rGfgHYSx6jCLe3HBKjKYNBZusRVTIFrwezwePm-5nu0)

```typescript
abstract class Middleware {
    protected next: Middleware | null = null;

    public setNext(next: Middleware): void {
        this.next = next;
    }

    public abstract run(request: Record<string, boolean>): void;
}

class Authentication extends Middleware {
    public run(request: Record<string, boolean>): void {
        if (request.isAuthenticated) {
            this.next && this.next.run(request);
            return;
        }
        console.log(401);
    }
}

class Authorization extends Middleware {
    public run(request: Record<string, boolean>): void {
        if (request.isAdmin) {
            this.next && this.next.run(request);
            return;
        }
        console.log(403);
    }
}

const authentication = new Authentication();
const authorization = new Authorization();
authentication.setNext(authorization);

// middlewares stack
const middlewares = authentication;
middlewares.run({ isAuthenticated: true, isAdmin: false }); // 403

```

### Behavioral - Command
[back to top](#table-of-contents)

![Behavioral - Command](https://www.plantuml.com/plantuml/svg/PL5BJWCn3Dtx56RN2f83T86Ak07b0bRgeH69Wn8FGaBS7TEP3ErqbTXvlzZxfbHrp0cVIyuaHz2eYPVgn7JaYkJVFNby2XgBFE1h9MbqBk1EJvmPASSt0eYYN0SAYm9-0-8zyXU7KNcpXH-0aAWr0qYehDo1CNyaKn9jLro7bGF7JwvdeL2aQHs3bhhf3zjR2odAc7XGBCFQQRUReKRh4hx8otGrFflrdq1FUh263U7w9prZcCvRrubrQJP3_N_IjTESeNjTXZBvEOTpZyj-raCipYqYi3UyhHP-0G00)

```typescript
interface Command {
    execute(): void;
}

class ConcreteCommand implements Command {
    #receiver: Receiver;
    constructor(receiver: Receiver) {
        this.#receiver = receiver;
    }
    public execute(): void {
        this.#receiver.onReceive();
    }
}

class Sender {
    public execute(command: Command): void {
        command.execute();
    }
}

class Receiver {
    public onReceive(): void {}
}

```

### Creational - Builder
[back to top](#table-of-contents)

![Creational - Builder](https://www.plantuml.com/plantuml/svg/XL9HJiCm3FtFASnV4TeEC0bfz09mXQprMAGq7eu37uYxatPrcbKgv2Uodj_pyqkEKInB6ZoqoVaUsOWJZwLwa0iE27PmxzQOpjiOuOsfJvt0jm7O0UD7SenzBfw0hk8eMFzoLxLJrL68mfb8t2ZfqVoewZnnLjKPrzlzXy28A3UYlAg3fdZPx6bBJtlhqQcdiRUPp0KI18zd0Jghnk5GMSd4sIGyGy0l5QaiOkXXrDbIgsqlSlkoG1QkWsMKn07aukA_qjCc2qVZND5E9493HSoCJykhnMRiBllnxBTZNyEhn2TOmruywLFHhdm4Synm_gQ_)

```typescript
class Product {
    #required: any;
    public optionalA: any;
    public optionalB: any;
    public constructor(required: any) {
        this.#required = required;
    }
}

class Builder {
    #product: Product;
    public constructor(required: any) {
        this.#product = new Product(required);
    }
    public setOptionalA(optionalA: any): Builder {
        this.#product.optionalA = optionalA;
        return this;
    }
    public setOptionalB(optionalB: any): Builder {
        this.#product.optionalB = optionalB;
        return this;
    }
    public build(): Product {
        return this.#product;
    }
}

const product = new Builder("required")
    .setOptionalA("optionalA")
    .setOptionalB("optionalB")
    .build();

```

### Creational - Factory - Abstract Factory
[back to top](#table-of-contents)

![Creational - Factory - Abstract Factory](https://www.plantuml.com/plantuml/svg/jLDDJmCX4BtFhnZJYyRqK8vDD5rC_1yKPtKJO1iOZQRfVtSQPMK_g5uySE1zyEOHs2KsaL-zmsQVE1hBZxBw-07SiQC1nGnVyGjvGkExPmFG1QRO6aluqFj37oZm1gmpAHL0Wvq_E745JfTqkg9RIb5JjrfEcUjqHGScL_roV1VM9X4U0V4M1IM_TtHz8ziL7hFXL0oBDf9X-W4kYDLKh4Hy0WWz4pfg6Vks76ExpHF8aMyceXNZ1k-MCxD0pGNd70fFU0u26DLjaDvPk7d_rHzQ_bfjVBN_crKUkbxVbo-gIYaOxc5iQIg46WWzSUWAeJJ0JbhBd_i4)

```typescript
interface Component1 {}
class Component1A implements Component1 {}
class Component1B implements Component1 {}
interface Component2 {}
class Component2A implements Component2 {}
class Component2B implements Component2 {}

abstract class FactoryBase {
    public assemble(): void {
        const comp1 = this.createComponent1();
        const comp2 = this.createComponent2();
    }
    protected abstract createComponent1(): Component1;
    protected abstract createComponent2(): Component2;
}

class FactoryA extends FactoryBase {
    protected createComponent1(): Component1 {
        return new Component1A();
    }
    protected createComponent2(): Component2 {
        return new Component2A();
    }
}

class FactoryB extends FactoryBase {
    protected createComponent1(): Component1 {
        return new Component1B();
    }
    protected createComponent2(): Component2 {
        return new Component2B();
    }
}

```

### Creational - Factory - Factory Method
[back to top](#table-of-contents)

![Creational - Factory - Factory Method](https://www.plantuml.com/plantuml/svg/dP512y8m38Nl-HNnfeZx2R9Ly2PuyXwxw8fj9sq6ojX_j-8s9kmW7lFutiiBoQDGaCPPt9EMEZmFB5LTWXYnF6ZOYnLJoG4fksMKuSaa8rdSrJvAQDuaBAHYnqZEN0d0UE5m8Sru37MP2D2MOXoc0esxsyHxYVE4cYE0pcbVQeOVjY-fA3AsWBZ6TY2wmOGwC0dtqt857S2Nkq1-2FjoBkxN3FLVnXJURBRZdMEpYLYCz5HL07dQcxxu0W00)

```typescript
interface Product {}
class ProductA implements Product {}
class ProductB implements Product {}

abstract class FactoryBase {
    public abstract createProduct(): Product;
}

class FactoryA extends FactoryBase {
    public createProduct(): Product {
        return new ProductA();
    }
}

class FactoryB extends FactoryBase {
    public createProduct(): Product {
        return new ProductB();
    }
}

```

### Creational - Factory - Simple Factory
[back to top](#table-of-contents)

![Creational - Factory - Simple Factory](https://www.plantuml.com/plantuml/svg/RP1B2iCm34JtEeMwQocvGA0XoQBhGazW7Bar-1DiPH52xbwdsFr0bZDw6Wrg8ul0apLurtOqT1MIVPY1DHlA7XRpm4-oXCBgXm3GZYae8GblmG-JP916n5XKX-zbIuxZFj7l4Hd99t41n3CkgILhkHOAPI31bDMHvv5Ei8BpJ6X8CNfL4khwZqrn6uqTNffFqsBsFsOFv0RS4W5AcQfglZtRD4z_Um40)

```typescript
interface Product {}
class ProductA implements Product {}
class ProductB implements Product {}

class Factory {
    public static createProduct(type: string): Product {
        switch (type) {
            case "A":
                return new ProductA();
            case "B":
                return new ProductB();
            default:
        }
    }
}

```

### Creational - Prototype
[back to top](#table-of-contents)

![Creational - Prototype](https://www.plantuml.com/plantuml/svg/TP1T2i8m48JVznJZcqNe0Gg2u0MyGaWsDfYVacmH4UzkMYsMWc-pCplVmfwAg2nZyBZa94aU0vCuyRoQUrQ6CrHxQrMBiq-HQISz1uOAxgg8N1JELkbL2qy2zBIxR-X5fBqgPOhDg0Kk3BxsevHDum3BpfjPwHIBvBgUScLidU63-WGBTtKm9c5uje9abxph_X2iOszmnDTgvvau6aoOlx3v5K1c6ND4vFkIxQLtfVa1JbNL9xy1)

```typescript
interface Prototype<T> {
    clone(): T;
}

class Product implements Prototype<Product> {
    public field: any;

    public constructor();
    public constructor(product: Product);
    public constructor(product?: Product) {
        if (product) {
            this.field = product.field;
        }
    }

    clone(): Product {
        return new Product(this);
    }
}

```

### Creational - Singleton
[back to top](#table-of-contents)

![Creational - Singleton](https://www.plantuml.com/plantuml/svg/RL0x2iCm3Drr2cLBARr0e92rSqzWNCKLs3BO2Xr2xbubDCH3DUdf_Op7ggxed28-MK8apGBA6gd1dRuf4Rh4mG7uw6ezMLm0yOQBvIZxjI5Ox2QUTjvdGsNscaj_iSlrdoEGFduc4wq0afKmqgIOfrCt38tGidZ2lZlQjl1j3ent5FgSvhszaCwbUI792xSk66spp_W2)

```typescript
class Singleton {
    private static instance: Singleton;
    private constructor() {}

    public static getInstance(): Singleton {
        if (!Singleton.instance) {
            Singleton.instance = new Singleton();
        }
        return Singleton.instance;
    }
}

new Singleton(); //impossible
Singleton.getInstance() == Singleton.getInstance(); //true

```

### Structural - Adapter
[back to top](#table-of-contents)

![Structural - Adapter](https://www.plantuml.com/plantuml/svg/LOyn3i8m34Ltdy9i89GS0HLn10OeczLOD289LUAmLDoTgYGHJ9Rzt_UtkoGK9Nk7HqEJS0InuhXr8vFXYAGVcZHU8atJCjt8o9wHlBqJmE0e9Jmvoq5m1iGztZ0dFdDysO6trnsyArNshfZ2Gc3wrcADEVnvAZN_wFsgbqob3ktW6l1KRJrq7CpouWS0)

```typescript
interface X {}
interface Y {}
interface Z {}

class Client {
    public userService(data: X): Z {
        return new Adapter(new Service()).run(data);
    }
}

class Adapter {
    #service: Service;
    public constructor(service: Service) {
        this.#service = service;
    }
    public run(data: X): Z {
        return this.#service.run(data);
    }
}

class Service {
    public run(data: Y): Z {}
}

```

### Structural - Bridge
[back to top](#table-of-contents)

![Structural - Bridge](https://www.plantuml.com/plantuml/svg/RL6xRiCm3Dpv5Mmc6qMSFLFQJjsA_e4iqwu0YJ8a6WrWvDyZ-O6eQ1O9Txmxak0bYWeoEOllmNG3WHYnj8CN-I57g9mP581gemIb1RLLCUBR1erdd07nY9zkj6ZIaz0hQiz9C6dneSfalR3pdd93fmn_1Qyfncejngbz43S0za9egHVqVTdlV7ueap6dD-DknDC9spo_uG68Eymf_wPVPfsNhcFPSgr-Ks-Okd95kaeA-xFs9lxmh0C9BP6xB8DjWGFJxvF4AjEbjwhh0wg834_QDqtYbw-q09GQVrnl09SqGhhf7G00)

```typescript
abstract class Shape {
    #color: Color;
    public constructor(color: Color) {
        this.#color = color;
    }
    public getColor(): void {
        this.#color.getColor();
    }
    public abstract getShape(): void;
}

abstract class Color {
    public abstract getColor(): void;
}

class Circle extends Shape {
    public getShape(): void {
        console.log("circle");
    }
}

class Blue extends Color {
    public getColor(): void {
        console.log("blue");
    }
}

const blueCircle = new Circle(new Blue());
blueCircle.getShape(); // circle
blueCircle.getColor(); // blue

```

### Structural - Composite
[back to top](#table-of-contents)

![Structural - Composite](https://www.plantuml.com/plantuml/svg/VL7BQiCm4BplLsnl2SN-05DA8DT03-aFRELHezQIZBI6Gkc_LufDbKkgatQOnuvqo2f95p_nCVevPgSWTJhXPhv0HYIM_hENdb_UFc2KNnD03tg11ujtxqBaWY9PCPis82X_4_CZumjcKUpsz4CKee8rpXnj8nPQTUIpfiNeaa088rSgaPaaPpv1B3i_JoKnQFu_OvKSOr1neUn-LzVnoMLz-WEVsPHhlZhAEEuQk-BxEsqcM5thR873i96AmCPq5RCBg_bGm7hgq3UpLhZj7RlkveqEXLA-wXS0)

```typescript
interface Component {
    execute(): void;
}

class Container implements Component {
    #comps: Component[] = [];
    public add(comp: Component) {
        this.#comps.push(comp);
    }
    public execute(): void {
        for (const comp of this.#comps) {
            comp.execute();
        }
    }
}

class Leaf implements Component {
    public execute(): void {}
}

```

### Structural - Decorator
[back to top](#table-of-contents)

![Structural - Decorator](https://www.plantuml.com/plantuml/svg/VP7DRi9038Jl-nJk3LHr7u0JQdc7diqoAL7t9_8w4XBYtJ5GaZIqt6nfvlEClAxAedsAj44embh4QQiHatqFta68_RTdJv_2NGTnBxf70d5glzYvDYkauG3wAAah6Ldfw8XU2GU4Nh5OkfDp8NAj9ib1e1YbRUgYqRBMvtxULXKEIZVGErSCEV-7lDrtyzbmnOQI3TK7Cou6zVBnOYuAYcYKIlFxtchr8pJJ1Uj77_AEBiPvuJ4h3cgYUODvuzjcZV_8yi2SvgczlSXFGNVC46rja_tz3000)

```typescript
interface Component {
    execute(): void;
}

class ConcreteComponent implements Component {
    public execute(): void {
        console.log("from ConcreteComponent");
    }
}

abstract class BaseDecorator implements Component {
    #comp: Component;
    public constructor(comp: Component) {
        this.#comp = comp;
    }

    execute(): void {
        this.#comp.execute();
    }
}

class ConcreteDecoratorA extends BaseDecorator {
    public execute(): void {
        super.execute();
        this.extra();
    }

    private extra(): void {
        console.log("from ConcreteDecoratorA");
    }
}

class ConcreteDecoratorB extends BaseDecorator {
    public execute(): void {
        super.execute();
        this.extra();
    }

    private extra(): void {
        console.log("from ConcreteDecoratorB");
    }
}

const comp = new ConcreteComponent();
comp.execute();
const decoratedCompA = new ConcreteDecoratorA(comp);
decoratedCompA.execute();
const decoratedCompB = new ConcreteDecoratorB(decoratedCompA);
decoratedCompB.execute();

```

### Structural - Facade
[back to top](#table-of-contents)

![Structural - Facade](https://www.plantuml.com/plantuml/svg/bP1B2i8m48RtSufnfqWzG5SrWlSOqcaDv54wuwhqxaP8QHOYT9a_tpUlJfHcVGUFJxBKCwXJpzlZf2yEZ1JSI03MaqZvmWKGhxXaNPrTSPgJPP7p1TODVAGmfSXHxqTWynUEIHaz3uffA9EqRI6ojhUyxLeLcohcsEEt743Pg6ag_rTeeCjIljK7)

```typescript
class ComponentA {
    public static process() {}
}

class ComponentB {
    public static process() {}
}

class Facade {
    public static process() {
        ComponentA.process();
        ComponentB.process();
    }
}

Facade.process();

```

### Structural - Flyweight
[back to top](#table-of-contents)

![Structural - Flyweight](https://www.plantuml.com/plantuml/svg/VLFBReCm4BpxAxQtH0t-0DH6aI95FVONjcG1gyHEx4LfLFNVQ_Cq8C9jjRCpm-pwu1WjrvSAJjNZJgeeMR3YYgAw93oJ1PJV4YKSCIj9l7195mAyg0A5o2fq3ev6C_qm_0g016gjRZLzMdDjodoW0tY5p6Z7jixOsCq8t86bAo4hNOHosq3DbImoRRRYJmXjcA2YdC7alLwQHcn-X4lbv4WAxrChWn7Vo37CF6H1FFpkPkQ1z1c2x9fuvozcbhtdKJZcQTCQ14-jYIws3tGburT5RnCVkn6_XwnPGGZdcV5vN7F1D8sdFPtAWy6MFKGo8qmz97njtytxEz1qXpKtOPUMkBPwbNyzeIwQ2NnnHazE9rw3JwM_qoJPBq8PcYP9eYUmMDQqVV3M_HiI_m00)

```typescript
class Forest {
    #trees: Tree[];
    #factory = new TreeTypeFactory();

    plantTree({
        x,
        y,
        name,
        color,
        texture,
    }: {
        x: number;
        y: number;
        name: string;
        color: string;
        texture: string;
    }): void {
        this.#trees.push(
            new Tree(this.#factory, { x, y, name, color, texture })
        );
    }
}

class Tree {
    public x: number;
    public y: number;
    public type: TreeType;

    public constructor(
        factory: TreeTypeFactory,
        {
            x,
            y,
            name,
            color,
            texture,
        }: {
            x: number;
            y: number;
            name: string;
            color: string;
            texture: string;
        }
    ) {
        this.x = x;
        this.y = y;
        // instead of directly constructing a new treeType
        // fetch the treeType from factory
        // to save memory usage
        this.type = factory.getTreeType({ name, color, texture });
    }
}

class TreeTypeFactory {
    #cache: Record<string, TreeType>;
    public getTreeType({
        name,
        color,
        texture,
    }: {
        name: string;
        color: string;
        texture: string;
    }): TreeType {
        const key = this.hashKey({ name, color, texture });
        if (!this.#cache[key]) {
            this.#cache[key] = new TreeType({ name, color, texture });
        }
        return this.#cache[key];
    }

    private hashKey({
        name,
        color,
        texture,
    }: {
        name: string;
        color: string;
        texture: string;
    }): string {
        return `${name}-${color}-${texture}`;
    }
}

class TreeType {
    #name: string;
    #color: string;
    #texture: string;

    public constructor({
        name,
        color,
        texture,
    }: {
        name: string;
        color: string;
        texture: string;
    }) {
        this.#name = name;
        this.#color = color;
        this.#texture = texture;
    }
}

```

### Structural - Proxy
[back to top](#table-of-contents)

![Structural - Proxy](https://www.plantuml.com/plantuml/svg/bP112i9034NtEKNSjTXUGRfr9uW72DEq3KndIYQALRoxqjekH11N2Vdv_uLKoKZjt7iyQBoEO6AUttt7LBFYAN6DJLHqv3e9RO6URYDA41FoSYEJ60faSx2nZdj6wgKb00d6sf1ZFB9UnF5-7Tm1SOjnO9tSMGuF0ESffMKNfH_yAonO-ii-dVxJNAwODDSfqCMGJC_EecOVUlwDEBDYMUwMEAWurAzlmXC0)

```typescript
interface IDownloader {
    download(query: string): string;
}

class Downloader implements IDownloader {
    public download(query: string): string {
        return query;
    }
}

class DownloaderProxy implements IDownloader {
    #downloader: Downloader;
    #cache: Record<string, string>;

    public constructor(downloader: Downloader) {
        this.#downloader = downloader;
    }
    public download(query: string): string {
        if (!this.#cache[query]) {
            this.#cache[query] = this.#downloader.download(query);
        }
        return this.#cache[query];
    }
}

const downloaderWithCache = new DownloaderProxy(new Downloader());

```


## References
- [refactor.guru](https://refactoring.guru/design-patterns)
